<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>员工管理</title>
    <link rel="shortcut icon" href="favicon.ico">
	<link href="../static/admin/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="../static/admin/css/animate.css" rel="stylesheet">
    <link href="../static/admin/css/style.css?v=4.1.0" rel="stylesheet">
	<link href="../static/admin/css/bootstrap-editable.css" rel = "stylesheet" />
</head>

<body class="gray-bg">
    <div class="wrapper wrapper-content animated fadeInRight">
		<div class="col-sm-4" style="margin-bottom: 10px;">
		    <a data-toggle="modal" class="btn btn-success" href="#modal-form" data-toggle="modal" data-target="#myModal">添加人员</a>
	</div>
		
		<div class="row">
		    <div class="col-sm-12">
		        <div class="ibox float-e-margins">
		            <div class="ibox-title">
		                <h5>员工管理</h5>
		            </div>
		            <div class="ibox-content">
						<table id = "admin" class="footable table table-stripped toggle-arrow-tiny" data-page-size="8">
		                </table>
		            </div>
		        </div>
		    </div>
		</div>
	</div>
	
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						添加人员
					</h4>
				</div>
				<div class="modal-body">
					
					<table class="footable table table-stripped toggle-arrow-tiny" data-page-size="8">
					    <thead>
					    <tr>
					        <th>账号</th>
							<th>名字</th>
							<th>职位</th>
					    </tr>
					    </thead>
					    <tbody>
					    <tr>
					        <td><input/></td>
					        <td><input/></td>
					        <td><input/></td>
					    </tr>
					    </tbody>
						<thead>
						<tr>
						    <th>账号</th>
							<th>名字</th>
							<th>职位</th>
						</tr>
						</thead>
						<tbody>
						<tr>
						    <td><input/></td>
						    <td><input/></td>
						    <td><input/></td>
						</tr>
						</tbody>
					    <tfoot>
					    <tr>
					
					</table>
					
					
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">取消
					</button>
					<button type="button" class="btn btn-primary">
						确定
					</button>
				</div>
			</div>
		</div>
	</div>
</body>
<!-- 全局js -->
<script src="../static/admin/js/jquery.min.js?v=2.1.4"></script>
<script src="../static/admin/js/bootstrap.min.js?v=3.3.6"></script>
<script src="../static/admin/js/jquery.form.js"></script>
<script src="../static/admin/js/jquery.cookie.js"></script>
<script src="../static/admin/js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
<script src="../static/admin/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="../static/admin/js/plugins/bootstrap-table/bootstrap-table-mobile.min.js"></script>
<script src="../static/admin/js/bootstrap-editable.min.js"></script>
<script src="../static/admin/js/bootstrap-table-editable.js"></script>



<script>
	$(function() {
		$('#admin').bootstrapTable('destroy'); 
		$('#admin').bootstrapTable({
			method: 'get',
			url: "http://test.wslhome.top/admin/getAdminList/v1",
			dataType: "json",
			headers: {
				'Authorization': $.cookie("token")
			},
			ajaxOptions: {
			    xhrFields: {
			        withCredentials: false
			    },
			    crossDomain: true
			},
			striped: true,
			pageNumber: 1,
			pagination: true,
			sidePagination: 'server',
			pageSize: 15,
			pageList: [5, 10, 15,20, 30,50],
			showRefresh: false,
			silent: true, 
			cache: false,
			queryParams: null,
			clickToSelect: true,
			responseHandler: returnFormat,
			columns: [{
				title: 'Id',
				field: 'id',
				edit:true,
				sortable: true
			}, {
				title: '姓名',
				field: 'name',
				editable: {
				    type: 'text',
				    title: '姓名',
				    validate: function (v) {
				        if (!v) return '用户名不能为空';
				
				    }
				}
			},{
				title: '密码',
				field: 'password',
				sortable: true
			},{
				title: '手机号',
				field: 'phone',
				sortable: true
			}, {
				title: '性别Id',
				field: 'sex',
				sortable: true
			}, {
				title: '家庭住址',
				field: 'address',
				sortable: true
			}, {
				title: '创建时间',
				field: 'creatTime',
				sortable: true
			}  , {
				title: '更新时间',
				field: 'updateTime',
				sortable: true
			}, {
				title: '操作',
				field: 'grade',
				formatter: function(value, row, index) {
					var html ='<button type="button" class="btn  btn-info" style="margin:5px">保存编辑</button>'
					+'<button type="button" class="btn  btn-warning" style="margin:5px">取消权限</button>'
					+'<button type="button" class="btn  btn-danger" style="margin:5px">删除人员</button>';
					return html;
				}
			}],
			// onClickCell: function(field, value, row, $element) {
			// 	$element.attr('contenteditable', true);
			// 	$element.blur(function() {
			// 		let index = $element.parent().data('index');
			// 		let tdValue = $element.html();
					
			// 	})
			// },
			onEditableSave: function (field, row, oldValue, $el) {
                $.ajax({
                    type: "post",
                    url: null,
                    data: row,
                    dataType: 'JSON',
                    success: function (data, status) {
                        if (status == "success") {
                            alert('提交数据成功');
                        }
                    },
                    error: function () {
                        alert('编辑失败');
                    },
                    complete: function () {

                    }

                })
			}
		})

		function returnFormat(res) {
			return {
				"rows":res.data
			};
		}
	})
</script>
	    

</html>
	
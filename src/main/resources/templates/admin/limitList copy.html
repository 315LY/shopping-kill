<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title> - 基础表格</title>
    <meta name="keywords" content="">
    <meta name="description" content="">

    <link rel="shortcut icon" href="favicon.ico"> <link href="../static/admin/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="../static/admin/css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="../static/admin/css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="../static/admin/css/animate.css" rel="stylesheet">
    <link href="../static/admin/css/style.css?v=4.1.0" rel="stylesheet">

</head>

<body class="gray-bg">
	
	<div class="row">
	    <div class="col-sm-12">
	        <div class="tabs-container">
	            <ul class="nav nav-tabs">
	                <li class="active"><a data-toggle="tab" href="#tab-1" aria-expanded="true" onclick="change(100)"> 手机号</a>
	                </li>
	                <li class=""><a data-toggle="tab" href="#tab-2" aria-expanded="false" onclick="change(10)">IP地址</a>
	                </li>
	            </ul>
	            <div class="tab-content">
	                <div id="tab-1" class="tab-pane active">
	                    <div class="panel-body">
	                        
							<div class="wrapper wrapper-content animated fadeInRight">
							    <div class="row">
							        <div class="col-sm-12">
							            <div class="ibox float-e-margins">
							                <div class="ibox-title">
							                    <h5>手机名单列表</h5>                      
							                </div>
							                <div class="ibox-content">
							                    <div class="row">
							                        <div class="col-sm-4">
							                            <div class="input-group">
							                                <input type="text" placeholder="请输入关键词" class="input-sm form-control"> <span class="input-group-btn">
							                                    <button type="button" class="btn btn-sm btn-primary"> 搜索</button> </span>
							                            </div>
							                        </div>
													<div class="col-sm-7"></div>
													<div class="m-b-xs">
													    <a data-toggle="modal" class="btn btn-success" href="#modal-form" data-toggle="modal" data-target="#EditModal">添加</a>
														<a data-toggle="modal" class="btn btn-danger" href="#modal-form" data-toggle="modal" data-target="#EditModal">删除</a>
													</div>
							                    </div>
							                    <div class="table-responsive">
							                        <table id = "limitList" class="table table-striped table-bordered table-hover dataTables-example">
							                        </table>	
							                    </div>
							                </div>
							            </div>
							        </div>
							    </div>
							</div>
							
	                    </div>
	                </div>
	            </div>
	        </div>
	    </div>
	</div>	
	
    
        
		
		
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						二次确认操作
					</h4>
				</div>
				<div class="modal-body">
					您确定要移出名单吗？
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">取消
					</button>
					<button type="button" class="btn btn-primary">
						确定
					</button>
				</div>
			</div>
		</div>
	</div>
	
	<div class="modal fade" id="EditModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						二次确认操作
					</h4>
				</div>
				<div class="modal-body">
					<div class="form-group">
					    <div class="form-group">
					        <label class="col-xl-3 control-label">手机号</label>
					        <div class="col-xl-9">
					            <input type="text" class="form-control layer-date" />
					        </div>
					    </div>
					</div>
					
					<div class="form-group">
					    <div class="form-group">
					        <label class="col-xl-3 control-label">开始时间</label>
					        <div class="col-xl-9">
					            <input class="form-control layer-date" placeholder="YYYY-MM-DD hh:mm:ss" onclick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})">
					        </div>
					    </div>
					</div>
					<div class="form-group">
						<div class="form-group">
							<label class="col-xl-3 control-label">开始时间</label>
							<div class="col-xl-9">
								<input class="form-control layer-date" placeholder="YYYY-MM-DD hh:mm:ss" onclick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})">
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">取消
					</button>
					<button type="button" class="btn btn-primary">
						添加
					</button>
				</div>
			</div>
		</div>
	</div>
</body>			
    <!-- 全局js -->
    <script src="../static/admin/js/jquery.min.js?v=2.1.4"></script>
    <script src="../static/admin/js/bootstrap.min.js?v=3.3.6"></script>
    <script src="../static/admin/js/jquery.form.js"></script>
    <script src="../static/admin/js/jquery.cookie.js"></script>
    <script src="../static/admin/js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
    <script src="../static/admin/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
    <script src="../static/admin/js/plugins/bootstrap-table/bootstrap-table-mobile.min.js"></script>
    
    <script type="application/javascript">
	$(function(){
		var url = "http://test.wslhome.top/admin/getBlackListForPhone/v1";
		limit(url);
	});
	
	function change(num){
		var url = "http://test.wslhome.top/admin/getBlackListForPhone/v1";
		if (num == 10){
			url="http://test.wslhome.top/admin/getBlackListForIp/v1";
		}
		limit(url);
		$('#limitList').bootstrapTable('refresh');
	}
	
	function limit(url) {
		$('#limitList').bootstrapTable('destroy'); 
		$('#limitList').bootstrapTable({
			method: 'get',
			url: url,
			dataType: "json",
			headers: {
				'Authorization': $.cookie("token")
			},
			ajaxOptions: {
			    xhrFields: {
			        withCredentials: false
			    },
			    crossDomain: true
			},
			striped: true,
			pageNumber: 1,
			pagination: true,
			sidePagination: 'server',
			pageSize: 10,
			pageList: [5, 10, 20, 30],
			showRefresh: false,
			silent: true, 
			cache: false,
			queryParams: queryParams,
			responseHandler: returnFormat,
			columns: [{
				title: 'Id',
				field: 'id',
				sortable: true
			}, {
				title: '号码/地址',
				field: 'number',
				sortable: true
			}, {
				title: '开始时间',
				field: 'startTime',
				sortable: true
			}, {
				title: '结束时间',
				field: 'endTime',
				sortable: true
			}, {
				title: '更新时间',
				field: 'updateTime',
				sortable: true
			}]
		})
		function queryParams(params) {
			var temp = {
				page : (params.offset / params.limit) + 1,
				num: params.limit,				
			};
			return temp;
		}
	
		function returnFormat(res) {
			console.log(res);
			return {
				"rows":res.data.records,
				"total": res.data.total
			};
		}
	}
	</script>    
       
</html>
        
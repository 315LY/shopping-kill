## 商品秒杀系统

**项目还在继续完善中，改项目是今年毕设项目，目前只完成部分功能。** 
**前端界面-后台-展示已经完成  后端-后台管理基本完成** 
**项目源码地址在码云，但未公开，由于开发中设计到配置文件，将在完成后进行全部开源** 
**喜欢就给个♥** 

作者：sirwsl

博客：https://www.wslhome.top

CSDN: https://blog.csdn.net/qq_40432886

个人主页：https://my.wslhome.top

欢迎交流：sirwsl@163.com



### 简介

项目主要针对秒杀系统进行实现，前后端分离项目，其中设计到技术主要为SpringBoot、Zookeeper、Redis、rabbitMQ。
添加一键部署，mybatis-plus逆向生成 其中融入短信通知（榛子云）、邮件通知（boot-starter-mail）、短信验证（kaptcha）、一二级缓存（JetCache）、跨域登录（jjwt）、数据库连接（druid），zi
还包括自定义注解、切面编程等相关东西

### 一、项目概况
**总括：** 

采用SpringBoot+中间件实现在高并发业务场景下商品的的限时抢购秒杀系统，本题目基于线上电商平台，以高可靠、高负载、高并发来实现商品的限时抢购系统。

**研究内容：**

（1）主要研究在O2O模式下，电商平台如何实现并优化业务场景，从而达到亿万级并发量的秒杀系统，采用Java、SpringBoot、Redis、RabbitMQ、zookeeper、mysql等技术，实现一个高负载、高并发、高可靠性的秒杀系统

（2）为提高并发量与可靠性，采用Docker+Nginx实现反向代理与负载均衡，使用熵值法来计算该算法中四个核心要素的权重系数,从而进一步提高平台负载均衡的能力和并发性能

（3）采用OSS存储、CDN加速，进一步改善浏览体验与并发量

（4）采用以上技术与框架实现商品管理、商品上架、业务管理、前端门户等相关模块

（5）对秒杀系统的性能进行测试,前后动态调节权重实现负载均衡策略对平台的并发性能和吞吐率所带来的提升效果。

### 二、目录说明
```

├─doc          项目文档
│  ├─api       文档接口
│  │  └─admin  admin目录下文档接口
│  ├─ER        ER建模请忽略
│  └─refer     毕设文献参考
├─sql          sql文件
└─src		   文件目录
    ├─main
    │  ├─java
    │  │  └─com
    │  │      └─wsl
    │  │          └─shoppingKill
    │  │              ├─common      公共的一些配置与工具类
    │  │              ├─component   一些组件、短信、邮件发送、jwt等
    │  │              ├─constant    常用枚举类
    │  │              ├─controller   控制层
    │  │              ├─domain    实体类
    │  │              ├─mapper 
    │  │              ├─obj    一些对象
    │  │              ├─request   请求等拦截器之类的东西
    │  │              ├─service    服务层
    │  │              └─serviceImpl    实现层
    │  │                  ├─aspect     切面
    │  │                  ├─subscription  队列监听
    │  │                  └─timedTask     定时任务
    │  └─resources
    │      ├─config       yml文件
    │      ├─ftl          邮件发送模板
    │      ├─mapper       xml-mapper
    │      └─templates   前端文件
    └─test 自己写的些测试
     

```

### 三、完成进度

参见doc下的完成进度表



  

### 四、主要技术

(一)、整体架构：

1、Redis主从架构：

本系统为保证系统的高可用、高负载、和容灾性，通过redis集群主从复制实现，在集群环境中master会自动将数据同步到slave，可以进行读写分离，从而实现分载master的读操作压。master是以非阻塞的方式为slave提供服务，通过redis主从架构进一步实现负载均衡与故障恢复，从而提高系统的容灾性。

2、Zookeeper集群架构：

通过Zookeeper集群架构实现了应用的简单性，可靠性、可拓展性、透明性。Zookeeper基本更进一步提高了系统的整体容灾性能。

3、RabbitMQ集群架构：

通过RabbitMQ集群化部署实现系统的高可靠高可用，对于限时抢购系统，rabiitMq更加提供了高可用、高并发的成熟方案。

4、OSS存储：

在系统的整体架构中，OSS存储将单个对象分离为meta、data两部分，并将二者分离存储，OSS实现了Region级资源快速调度能力，在用户有突发带宽、Qps需求而旧数据所在集群无法满足时，可以按前缀、或者按比例将一个桶的新写入数据在一个Region内不同集群，甚至不同的AZ见调度从而快速满足用户需求。通过镜像会员实现Region级容灾。从而在满足与资源存储的基础上提供限时抢购系统的性能。

5、CDN加速：

由于CDN几乎覆盖国内的所有线路，对于可靠性来说，不会因为限时抢购系统Qps锅盖，意外而导致网站的内容无法访问，由于是全国化多节点覆盖，在意外节点发生故障后，对网站的访问会自动导向其他健康节点，从而实现整体的稳定性。通过CDN的使用，极大减轻服务器压力，提高网站的访问速度。

6、网站集群化部署：

通过网站的集群化部署，能够更好的实现负载均衡，提高系统的并发量。



(二)、实现框架：SpringBoot+MySQL+MybatisPlus+BootStrap

1、Springboot：

采用springboot技术简化Spring应用的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，在构建系统整体结构时可更好的关注限时抢购逻辑，简化其中配置，更方便了前后端分离。

2、MySql：

通过mysql存储，采用InnoDB更好的支持了事物的存在，在系统中通过mysql存储基本信息对行锁的使用，更好的增加系统的并发用户数量，从而避免在商品限时抢购过程中造成数据库服务器瘫痪情况。

3、MyBatisPlus：

通过mybatis-plus的使用，更加便于代码的管理与维护，降低程序之间的耦合度，在编码的过程中可更好的实现debug，其比床头JDBC相比较，减少大量sql语句，彻底将sql从程序代码中分离，更便于提高工作效率。

4、BootStrap：

在限时抢购系统中通过bootstap前端框架使用，更加便于快速搭建前端界面，其内置布局与JS，使得整体系统配色、布局、数据传输、解析上更加方便。

(三)、中间件技术：

1、RabbitMQ：通过rabbitmq的使用，在系统中进行短信推送、邮件推送、订单管理等模块中更好的实现了系统的解耦，以异步方式进行操作，使得系统更加平稳运行。通过消息队列的应用，在高并发场景下进行限流，从而保证系统的可运行，起到削峰作用。

2、Zookeeper：

通过zookeeper分布式锁的应用，保证数据在并发环境下的数据一致性与安全性，通过实现读写所，从而更好的提高系统的性能。

3、Redis：

系统中通过运用redis缓存用户基本信息除外，通过将商品进行提前加入缓存，进一步提升读写性能，通过redis缓存的运用提高用户访问量，同时引入JetCache采用两级缓存redis+ caffeine，从而防止缓存雪崩、缓存击穿的场景出现。

(四)、其余技术：

1、SnowFlake

雪花算法，系统中订单生成以及相关的id采用雪花算法替代传统的UUID进行实现，通过41bit的时间戳、10bit的工作机器id与12bit的序列号实现64bit的大整数，实现每秒20万id生成，从而在并发环境中提高系统性能。

2、Druid

在系统数据库连接采用druid代替传统的jdbc连接方式，通过连接池的方式实现，更好的实现数据的增删查改。通过druid可视化界面，更好的对sql性能进行整体监控。

3、Nginx

通过运行nginx代替创痛的Tomcat服务器，在网站集群化部署的过程中实现负载均衡，在高并发的环境下，网络稳定性对其影响非常笑，通过nginx负载均衡，更好的是的网站能够承担高在压力且稳定。

4、Docker

在docker中更好的为系统提供了持续部署与测试。docker可以通过确保从开发到产品发布整个过程环境的一致性来解决这个问题Docker容器通过相关配置，保持容器内部所有的配置和依赖关系始终不变。其在安全性上docker内部容器在部署时实现应用程序将的完全分割与隔离，更好的保证系统的安全性。





